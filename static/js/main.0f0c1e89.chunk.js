(this.webpackJsonpnews=this.webpackJsonpnews||[]).push([[0],{47:function(e,t,r){},48:function(e,t,r){},49:function(e,t,r){},53:function(e,t,r){},55:function(e,t,r){},60:function(e,t,r){},62:function(e,t,r){"use strict";r.r(t);var n=r(3),a=r(2),c=r(18),s=r.n(c),l=(r(47),r(48),r(27)),i=r(9),o=(r(49),r(15)),u=r(8),b=r(29),f=r(10),d=r(22),j=r.n(d),p=r(12),O="SET_LIST",m="SEARCH_LIST",v="CREATE_ITEM",h="REMOVE_ITEM",w="EDIT_ITEM",x="SET_USER",_=(r(53),function(e){e.text;var t=Object(a.useState)(!1),r=Object(b.a)(t,2),c=r[0],s=r[1],l=Object(a.useState)({login:"",password:""}),i=Object(b.a)(l,2),d=i[0],O=i[1],m=Object(f.b)(),v=Object(f.c)((function(e){return e.currentUser}),j.a),h=Object(f.c)((function(e){return e.registeredUsers}),j.a),w=function(e){var t=e.target,r=t.name,n=t.value;O(Object(u.a)(Object(u.a)({},d),{},Object(o.a)({},r,n)))},_=function(){s(!1),O({login:"",password:""})};return Object(n.jsxs)("div",{className:"".concat(c?"modal modal--open":"modal modal--close"),children:[Object(n.jsx)("div",{onClick:_,className:"modal__outside"}),Object(n.jsxs)("form",{className:"modal__body",children:[Object(n.jsx)("input",{className:"modal__body__input",onChange:w,value:d.login,placeholder:"Login",type:"text",name:"login"}),Object(n.jsx)("input",{className:"modal__body__input",onChange:w,value:d.password,placeholder:"Password",type:"password",name:"password",autoComplete:"on"}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault();var t=d.login,r=d.password;if(t&&r){var n=h.find((function(e){return e.login===d.login&&e.password===d.password}));n?(m({type:x,user:{login:t,role:n.role}}),p.b.success("\u0412\u0445\u043e\u0434 \u0432 \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d."),_()):p.b.error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!")}else p.b.error("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f!")},className:"modal__body__btn btn",children:"\u0412\u0445\u043e\u0434"})]}),Object(n.jsx)("button",{className:"modal__btn btn",onClick:"guest"===v.role?function(){s(!0)}:function(){m({type:x,user:{login:"\u0413\u043e\u0441\u0442\u044c",role:"guest"}}),Object(p.b)("\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")},children:"guest"===v.role?"\u0412\u0445\u043e\u0434":"\u0412\u044b\u0445\u043e\u0434"})]})}),g=function(){return Object(n.jsx)("nav",{className:"nav",children:Object(n.jsxs)("ul",{className:"nav__list container",children:[Object(n.jsx)("li",{className:"nav__list-item",children:Object(n.jsx)(l.b,{className:"nav__list-item--link",activeClassName:"nav__list-item--active",to:"/home",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(n.jsx)("li",{className:"nav__list-item",children:Object(n.jsx)(l.b,{className:"nav__list-item--link",activeClassName:"nav__list-item--active",to:"/news",children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"})}),Object(n.jsx)("li",{className:"nav__list-item",children:Object(n.jsx)(_,{})})]})})},y=(r(55),function(){var e=Object(f.c)((function(e){return e.currentUser.login}),j.a);return Object(n.jsx)("div",{className:"home container",children:Object(n.jsxs)("span",{className:"home__welcome-text",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",e]})})});function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var E=a.createElement("path",{d:"M15.7 14.3l-4.2-4.2c-0.2-0.2-0.5-0.3-0.8-0.3 0.8-1 1.3-2.4 1.3-3.8 0-3.3-2.7-6-6-6s-6 2.7-6 6 2.7 6 6 6c1.4 0 2.8-0.5 3.8-1.4 0 0.3 0 0.6 0.3 0.8l4.2 4.2c0.2 0.2 0.5 0.3 0.7 0.3s0.5-0.1 0.7-0.3c0.4-0.3 0.4-0.9 0-1.3zM6 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"});function S(e,t){var r=e.title,n=e.titleId,c=k(e,["title","titleId"]);return a.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,viewBox:"0 0 16 16",ref:t,"aria-labelledby":n},c),r?a.createElement("title",{id:n},r):null,E)}var I=a.forwardRef(S),C=(r.p,r(20)),P=r.n(C),z=r(28),U=r(38);U.a.initializeApp({apiKey:"AIzaSyAqmvNSyOGFhqXFDNR6kK-U3v2GzFxbWAk",authDomain:"news-miqart.firebaseapp.com",projectId:"news-miqart",storageBucket:"news-miqart.appspot.com",messagingSenderId:"359634870157",appId:"1:359634870157:web:a13dd4047ccca6b26d27c4"});var A=U.a;function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var L=a.createElement("path",{fill:"currentColor",d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"});function M(e,t){var r=e.title,n=e.titleId,c=F(e,["title","titleId"]);return a.createElement("svg",T({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"trash-alt",className:"svg-inline--fa fa-trash-alt fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":n},c),r?a.createElement("title",{id:n},r):null,L)}var R=a.forwardRef(M);r.p;function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var D=a.createElement("path",{fill:"currentColor",d:"M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"});function H(e,t){var r=e.title,n=e.titleId,c=B(e,["title","titleId"]);return a.createElement("svg",q({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-square",className:"svg-inline--fa fa-check-square fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":n},c),r?a.createElement("title",{id:n},r):null,D)}var V=a.forwardRef(H);r.p;function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function W(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var J=a.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"});function K(e,t){var r=e.title,n=e.titleId,c=W(e,["title","titleId"]);return a.createElement("svg",G({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times",className:"svg-inline--fa fa-times fa-w-11",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512",ref:t,"aria-labelledby":n},c),r?a.createElement("title",{id:n},r):null,J)}var X=a.forwardRef(K),Q=(r.p,function(e){var t=e.allNews,r=e.news,c=e.currentUser,s=Object(f.b)(),l=r;"guest"===c.role?l=r.filter((function(e){return e.approved})):"user"===c.role&&(l=r.filter((function(e){return e.author===c.login||e.approved})));var i=function(){var e=Object(z.a)(P.a.mark((function e(r){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=A.database().ref("news").child(r),!t.some((function(e){return e.id===r}))){e.next=9;break}return e.next=5,n.update({approved:!0});case 5:s({type:w,id:r}),p.b.success("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0430."),e.next=10;break;case 9:throw new Error("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0436\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0430");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p.b.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(z.a)(P.a.mark((function e(r){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=A.database().ref("news").child(r),!t.some((function(e){return e.id===r}))){e.next=9;break}return e.next=5,n.remove();case 5:s({type:h,id:r}),p.b.success("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430."),e.next=10;break;case 9:throw new Error("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0436\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0430");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p.b.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){A.database().ref("news").on("value",(function(e){var t=e.val(),r=[];for(var n in t)r.push(Object(u.a)({id:n},t[n]));s({type:O,list:r})}))}),[]),Object(n.jsx)("div",{className:"news__list ".concat("user"===c.role?"":"fullWidth"),children:l.length?l.map((function(e){return Object(n.jsxs)("div",{className:"news__card",children:["admin"===c.role&&e.approved&&Object(n.jsx)("button",{onClick:function(){return o(e.id)},className:"news__card__btn--x btn",children:Object(n.jsx)(X,{className:"remove-icon"})}),Object(n.jsx)("span",{className:"news__card__title",children:e.title}),Object(n.jsx)("span",{className:"news__card__date",children:e.createdAt}),Object(n.jsx)("span",{className:"news__card__text",children:e.text}),"admin"===c.role&&!e.approved&&Object(n.jsxs)("div",{className:"news__card__btn-group",children:[Object(n.jsx)("button",{onClick:function(){return i(e.id)},className:"news__card__btn--approve btn",children:Object(n.jsx)(V,{className:"approve-icon"})}),Object(n.jsx)("button",{className:"news__card__btn--remove btn",children:Object(n.jsx)(R,{onClick:function(){return o(e.id)},className:"remove-icon"})})]})]},e.id)})):Object(n.jsx)("span",{children:"\u041f\u0443\u0441\u0442\u0430\u044f \u043b\u0435\u043d\u0442\u0430 :("})})}),Y=function(e){var t=e.user,r=Object(a.useState)({title:"",text:""}),c=Object(b.a)(r,2),s=c[0],l=c[1],i=Object(f.b)(),d=function(e){var t=e.target,r=t.name,n=t.value;l(Object(u.a)(Object(u.a)({},s),{},Object(o.a)({},r,n)))},j=function(){var e=Object(z.a)(P.a.mark((function e(r){var n,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!s.title||!s.text){e.next=18;break}return e.prev=2,n=A.database().ref("news"),a=Object(u.a)(Object(u.a)({},s),{},{author:t,createdAt:(new Date).toLocaleDateString("en-GB"),approved:!1}),e.next=7,n.push(a);case 7:c=e.sent,i({type:v,newItem:Object(u.a)({id:c.key},a)}),l({title:"",text:""}),p.b.success("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430."),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),p.b.error(e.t0.message);case 16:e.next=19;break;case 18:p.b.error("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f!");case 19:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("form",{className:"news__form",children:[Object(n.jsx)("input",{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"news__form__title",onChange:d,value:s.title,type:"text",name:"title"}),Object(n.jsx)("textarea",{placeholder:"\u0422\u0435\u043a\u0441\u0442",className:"news__form__text",onChange:d,value:s.text,name:"text",cols:"54",rows:"5"}),Object(n.jsx)("button",{onClick:j,className:"news__form__btn btn",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})},Z=(r(60),function(){var e=Object(f.c)((function(e){return{news:e.news,currentUser:e.currentUser,filterForSearch:e.filterForSearch,filteredNews:e.filteredNews}}),j.a),t=e.news,r=e.currentUser,a=e.filterForSearch,c=e.filteredNews,s=Object(f.b)();return Object(n.jsxs)("div",{className:"news container",children:[Object(n.jsxs)("div",{className:"news__search fullWidth",children:[Object(n.jsx)("input",{onChange:function(e){var t=e.target.value;s(t?{type:m,text:t,filterForSearch:!0}:{type:m,text:"",filterForSearch:!1})},className:"news__search__input",type:"text",name:"search"}),Object(n.jsx)(I,{className:"news__search__icon"})]}),"user"===r.role&&Object(n.jsx)(Y,{user:r.login}),Object(n.jsx)(Q,{currentUser:r,allNews:t,news:a?c:t})]})});r(61);var $,ee=function(){return Object(n.jsx)(l.a,{children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(p.a,{autoClose:2200}),Object(n.jsx)(g,{}),Object(n.jsxs)(i.d,{children:[Object(n.jsx)(i.b,{exact:!0,path:"/",children:Object(n.jsx)(i.a,{to:"/home"})}),Object(n.jsx)(i.b,{path:"/home",component:y}),Object(n.jsx)(i.b,{path:"/news",component:Z}),Object(n.jsx)(i.a,{to:"/"})]})]})})},te=r(32),re=r(26),ne=function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](r,n):r}},ae={news:[],registeredUsers:[{login:"admin",password:"1111",role:"admin"},{login:"user",password:"2222",role:"user"},{login:"user2",password:"3333",role:"user"}],currentUser:{login:"\u0413\u043e\u0441\u0442\u044c",role:"guest"},filterForSearch:!1,filteredNews:[]},ce=ne(ae,($={},Object(o.a)($,"RESET_STATE",(function(){return ae})),Object(o.a)($,O,(function(e,t){var r=Object(te.a)(t.list);return Object(u.a)(Object(u.a)({},e),{},{news:r})})),Object(o.a)($,m,(function(e,t){var r=e.news.filter((function(e){return e.title.includes(t.text)||e.text.includes(t.text)}));return Object(u.a)(Object(u.a)({},e),{},{filterForSearch:t.filterForSearch,filteredNews:r})})),Object(o.a)($,v,(function(e,t){var r=Object(te.a)(e.filteredNews);return r.push(t.newItem),Object(u.a)(Object(u.a)({},e),{},{filteredNews:r})})),Object(o.a)($,h,(function(e,t){var r=e.filteredNews.filter((function(e){return e.id!==t.id}));return Object(u.a)(Object(u.a)({},e),{},{filteredNews:r})})),Object(o.a)($,w,(function(e,t){var r=Object(te.a)(e.filteredNews).map((function(e){return e.id===t.id?Object(u.a)(Object(u.a)({},e),{},{approved:!0}):e}));return Object(u.a)(Object(u.a)({},e),{},{filteredNews:r})})),Object(o.a)($,x,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{currentUser:t.user})})),$)),se=Object(re.c)(ce,Object(re.b)());s.a.render(Object(n.jsx)(f.a,{store:se,children:Object(n.jsx)(ee,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.0f0c1e89.chunk.js.map